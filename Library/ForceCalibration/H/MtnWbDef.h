
#ifndef __MTN_WB_DEF__
#define __MTN_WB_DEF__

// 1. Total number of blocks of speed profiles for XYZ
#define NUM_TABLE_SPEED_PROF_BLK		4
#define NUM_BONDHEAD_SPEED_PROF_BLK		6
#define NUM_BONDHEAD_SERVO_CTRL_BLK		20

#define NUM_TABLE_X_SERVO_CTRL_BLK		10
#define NUM_TABLE_Y_SERVO_CTRL_BLK		10


// 2. Functions: AxisName and Control Axis
void InitWireBondServoAxisName_VerLED_ACS();
void InitWireBondServoAxisName_HoriLED_ACS();
void InitWireBondServoAxisName();
void InitWireBondNameServo_ACS_SC_UDI_Axis(); // 20121203

// 3. Application Axis in ACS controller
#define APP_X_TABLE_ACS_ID    0
#define APP_Y_TABLE_ACS_ID    1
#define APP_Z_BOND_ACS_PCI_ID     4
#define APP_WIRE_CLAMP_ACS_PCI_ID 5

#define APP_Z_BOND_ACS_SC_UDI_ID     2
#define APP_WIRE_CLAMP_ACS_SC_UDI_ID 3

#define _EFSIKA_TABLE_X_AXIS   0
#define _EFSIKA_TABLE_Y_AXIS   1
#define _EFSIKA_BOND_Z_AXIS    4

// 3.Definition of axis on control card- ACS, used in OpenLoopTest, VelLoopTest, 
#define ACS_CARD_AXIS_X  0
#define ACS_CARD_AXIS_Y  1
#define ACS_CARD_AXIS_Z  2
#define ACS_CARD_AXIS_W  3
#define ACS_CARD_AXIS_A  4
#define ACS_CARD_AXIS_B  5
#define ACS_CARD_AXIS_C  6
#define ACS_CARD_AXIS_D  7

#define MAX_SERVO_AXIS_WIREBOND    4
typedef enum
{
	WB_AXIS_TABLE_X = 0,
	WB_AXIS_TABLE_Y = 1,
	WB_AXIS_BOND_Z = 2,
	WB_AXIS_WIRE_CLAMP = 3
};

typedef struct
{
	int iAxisInCtrlCardACS;
	double afEncoderResolution_cnt_p_mm; // [MAX_SERVO_AXIS_WIREBOND];
	char *strAxisNameEn;
	char *strAxisNameCn;
}AXIS_INFO_WIRE_BOND;

// 4. Machine Type,  Add STATION
#define WB_MACH_TYPE_VLED_MAGAZINE		0
#define WB_MACH_TYPE_VLED_FORK			1
#define WB_MACH_TYPE_HORI_LED           2
#define WB_MACH_TYPE_ONE_TRACK_13V_LED  3
#define WB_STATION_XY_VERTICAL          4
#define WB_STATION_XY_TOP               5
#define WB_STATION_BH                   6
#define WB_STATION_WIRE_CLAMP           7
#define WB_STATION_EFO_BSD				8
#define WB_STATION_USG_LIGHTING_PR      9
#define BE_WB_ONE_TRACK_18V_LED         10
#define BE_WB_HORI_20T_LED         11

// int get_sys_machine_type_flag();
extern char *pstrMechaTronicsConfig[];

// 5. application's default Limit position for motion testing
#define EFSIKA_X_TABLE_LOW_LIMIT_CNT   -138000
#define EFSIKA_X_TABLE_UPP_LIMIT_CNT   138000
#define EFSIKA_Y_TABLE_LOW_LIMIT_CNT   -20000
#define EFSIKA_Y_TABLE_UPP_LIMIT_CNT   20000  // 40000, On 20100315
#define BE_WB_Z_BOND_LOW_LIMIT_CNT 6000
#define BE_WB_Z_BOND_UPP_LIMIT_CNT 3000
#define BE_WB_Z_BOND_LOW_LIMIT_CNT_1CUP  2500
#define BE_WB_Z_BOND_UPP_LIMIT_CNT_1CUP  4500

#define BE_WB_Z_BOND_UPP_LIMIT_CNT_HORI_LED   50
#define BE_WB_Z_BOND_LOW_LIMIT_CNT_HORI_LED   -4000

#define EFSIKA_X_TABLE_LOW_LIMIT_HORI_BONDER_CNT   -25000
#define EFSIKA_X_TABLE_UPP_LIMIT_HORI_BONDER_CNT   25000

#define EFSIKA_X_TABLE_UPP_LIMIT_ONE_TRACK_V_LED_CNT 50000
#define EFSIKA_X_TABLE_LOW_LIMIT_ONE_TRACK_V_LED_CNT 20000
#define EFSIKA_Y_TABLE_UPP_LIMIT_ONE_TRACK_V_LED_CNT 30000
#define EFSIKA_Y_TABLE_LOW_LIMIT_ONE_TRACK_V_LED_CNT 10000

#define SPEED_PROFILE_TIME_UNIT_SEC  1
#define X_ENC_UNIT_UM            0.5
#define Y_ENC_UNIT_UM            0.5
#define A_ENC_UNIT_UM            1

#define TRAVEL_UPP_LIMIT_TABLE_X 171200
#define TRAVEL_LOW_LIMIT_TABLE_X -159900
#define LIMIT_TO_LIMIT_TABLE_X  (abs(TRAVEL_UPP_LIMIT_TABLE_X) + abs(TRAVEL_LOW_LIMIT_TABLE_X))

#define TRAVEL_UPP_LIMIT_TABLE_Y 70700
#define TRAVEL_LOW_LIMIT_TABLE_Y -32900
#define LIMIT_TO_LIMIT_TABLE_Y  (abs(TRAVEL_UPP_LIMIT_TABLE_Y) + abs(TRAVEL_LOW_LIMIT_TABLE_Y))

#define TRAVEL_UPP_LIMIT_BOND_HEAD_Z 1000
#define TRAVEL_LOW_LIMIT_BOND_HEAD_Z -10000
#define LIMIT_TO_LIMIT_BOND_HEAD_Z  (abs(TRAVEL_UPP_LIMIT_BOND_HEAD_Z) + abs(TRAVEL_LOW_LIMIT_BOND_HEAD_Z))

// Error Tolerance in mm, +-
#define TRAVEL_DIST_RANGE_ERR_TOL_MM  1
#define TRAVEL_DIST_RANGE_ERR_UPP_TOL_MM   15

// Maximum Expect Acc in m/s/s
#define MAX_EXPECT_ACC_TABLE_X_L    35
#define MAX_EXPECT_ACC_TABLE_X_U    45

#define MAX_EXPECT_ACC_TABLE_Y_L    20
#define MAX_EXPECT_ACC_TABLE_Y_U    25

#define MAX_EXPECT_ACC_BOND_HEAD_Z_L    450
#define MAX_EXPECT_ACC_BOND_HEAD_Z_U    500

// WB13T Maximum Expect Acc in m/s/s
#define MAX_EXPECT_ACC_WB13T_TABLE_X_L    40
#define MAX_EXPECT_ACC_WB13T_TABLE_X_U    65

#define MAX_EXPECT_ACC_WB13T_TABLE_Y_L    40
#define MAX_EXPECT_ACC_WB13T_TABLE_Y_U    85

#define MAX_EXPECT_ACC_WB13T_BOND_HEAD_Z_L    950
#define MAX_EXPECT_ACC_WB13T_BOND_HEAD_Z_U    1500

#define  LEN_UPLOAD_ARRAY		1000

// Tolerance and Dist between index edges
#define DIST_CNT_INDEX_EDGES   35
#define TOL_CNT_INDEX_EDGES    30

// 5. Upper Bound & Lower Bound Default Value, WB-XYZ
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOP_KP 	20
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOPKI 	50
#define BH_TUNINGPARAMETER_LOWBOUND_POSNLOOPKP 	10
#define BH_TUNINGPARAMETER_LOWBOUND_ACCFFC 	50
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOPLIMITI 	50

#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOP_KP 	130
#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOPKI 	300
#define BH_TUNINGPARAMETER_UPPBOUND_POSNLOOPKP 	200
#define BH_TUNINGPARAMETER_UPPBOUND_ACCFFC 	900
#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOPLIMITI 	50

// BH Section- IDLE
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOP_KP_BH_IDLE 	21
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOPKI_BH_IDLE 	70
#define BH_TUNINGPARAMETER_LOWBOUND_POSNLOOPKP_BH_IDLE 	40
#define BH_TUNINGPARAMETER_LOWBOUND_ACCFFC_BH_IDLE 	520

#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOP_KP_BH_IDLE  50
#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOPKI_BH_IDLE   300
#define BH_TUNINGPARAMETER_UPPBOUND_POSNLOOPKP_BH_IDLE 	60
#define BH_TUNINGPARAMETER_UPPBOUND_ACCFFC_BH_IDLE   	780

// BH Section- 1ST Contact
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOP_KP_BH_1ST_CONTACT 	12
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOPKI_BH_1ST_CONTACT 	3
#define BH_TUNINGPARAMETER_LOWBOUND_POSNLOOPKP_BH_1ST_CONTACT 	20
#define BH_TUNINGPARAMETER_LOWBOUND_ACCFFC_BH_1ST_CONTACT 	520

#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOP_KP_BH_1ST_CONTACT  168
#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOPKI_BH_1ST_CONTACT   257
#define BH_TUNINGPARAMETER_UPPBOUND_POSNLOOPKP_BH_1ST_CONTACT  266
#define BH_TUNINGPARAMETER_UPPBOUND_ACCFFC_BH_1ST_CONTACT      780

// BH Section- 1ST SrchHt
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOP_KP_BH_SRCH_HT 	71
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOPKI_BH_SRCH_HT 	71
#define BH_TUNINGPARAMETER_LOWBOUND_POSNLOOPKP_BH_SRCH_HT 	25
#define BH_TUNINGPARAMETER_LOWBOUND_ACCFFC_BH_SRCH_HT 	368

#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOP_KP_BH_SRCH_HT  149
#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOPKI_BH_SRCH_HT   209
#define BH_TUNINGPARAMETER_UPPBOUND_POSNLOOPKP_BH_SRCH_HT  145
#define BH_TUNINGPARAMETER_UPPBOUND_ACCFFC_BH_SRCH_HT      732

// BH Section- LOOPING
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOP_KP_BH_LOOPING 	40
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOPKI_BH_LOOPING 	80
#define BH_TUNINGPARAMETER_LOWBOUND_POSNLOOPKP_BH_LOOPING 	30
#define BH_TUNINGPARAMETER_LOWBOUND_ACCFFC_BH_LOOPING 	507

#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOP_KP_BH_LOOPING  130
#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOPKI_BH_LOOPING   240
#define BH_TUNINGPARAMETER_UPPBOUND_POSNLOOPKP_BH_LOOPING  120
#define BH_TUNINGPARAMETER_UPPBOUND_ACCFFC_BH_LOOPING      1143

// BH Section- LOOP_TOP
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOP_KP_BH_LOOP_TOP 	73
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOPKI_BH_LOOP_TOP 	46
#define BH_TUNINGPARAMETER_LOWBOUND_POSNLOOPKP_BH_LOOP_TOP 	27
#define BH_TUNINGPARAMETER_LOWBOUND_ACCFFC_BH_LOOP_TOP 	615

#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOP_KP_BH_LOOP_TOP  147
#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOPKI_BH_LOOP_TOP   374
#define BH_TUNINGPARAMETER_UPPBOUND_POSNLOOPKP_BH_LOOP_TOP  219
#define BH_TUNINGPARAMETER_UPPBOUND_ACCFFC_BH_LOOP_TOP      985

// BH Section-TRAJECTORY
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOP_KP_BH_TRAJECTORY 	62
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOPKI_BH_TRAJECTORY 	78
#define BH_TUNINGPARAMETER_LOWBOUND_POSNLOOPKP_BH_TRAJECTORY 	28
#define BH_TUNINGPARAMETER_LOWBOUND_ACCFFC_BH_TRAJECTORY 	583

#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOP_KP_BH_TRAJECTORY  138
#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOPKI_BH_TRAJECTORY   172
#define BH_TUNINGPARAMETER_UPPBOUND_POSNLOOPKP_BH_TRAJECTORY  122
#define BH_TUNINGPARAMETER_UPPBOUND_ACCFFC_BH_TRAJECTORY      867

// BH Section- TAIL
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOP_KP_BH_TAIL 	14
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOPKI_BH_TAIL 	48
#define BH_TUNINGPARAMETER_LOWBOUND_POSNLOOPKP_BH_TAIL 	25
#define BH_TUNINGPARAMETER_LOWBOUND_ACCFFC_BH_TAIL 	459

#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOP_KP_BH_TAIL  130
#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOPKI_BH_TAIL   182
#define BH_TUNINGPARAMETER_UPPBOUND_POSNLOOPKP_BH_TAIL  278
#define BH_TUNINGPARAMETER_UPPBOUND_ACCFFC_BH_TAIL      1191

// BH Section- RESET
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOP_KP_BH_RESET 	21
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOPKI_BH_RESET 	169
#define BH_TUNINGPARAMETER_LOWBOUND_POSNLOOPKP_BH_RESET 	31
#define BH_TUNINGPARAMETER_LOWBOUND_ACCFFC_BH_RESET 	393

#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOP_KP_BH_RESET  149
#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOPKI_BH_RESET   300
#define BH_TUNINGPARAMETER_UPPBOUND_POSNLOOPKP_BH_RESET  119
#define BH_TUNINGPARAMETER_UPPBOUND_ACCFFC_BH_RESET      1187

// BH Section_2ND_CONTACT
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOP_KP_BH_2ND_CONTACT 	60
#define BH_TUNINGPARAMETER_LOWBOUND_VELLOOPKI_BH_2ND_CONTACT 	1
#define BH_TUNINGPARAMETER_LOWBOUND_POSNLOOPKP_BH_2ND_CONTACT 	37
#define BH_TUNINGPARAMETER_LOWBOUND_ACCFFC_BH_2ND_CONTACT 	520

#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOP_KP_BH_2ND_CONTACT  150
#define BH_TUNINGPARAMETER_UPPBOUND_VELLOOPKI_BH_2ND_CONTACT   259
#define BH_TUNINGPARAMETER_UPPBOUND_POSNLOOPKP_BH_2ND_CONTACT  93
#define BH_TUNINGPARAMETER_UPPBOUND_ACCFFC_BH_2ND_CONTACT      780

// TABLE
#define TBL_X_TUNINGPARAMETER_LOWBOUND_VELLOOP_KP 	271
#define TBL_X_TUNINGPARAMETER_LOWBOUND_VELLOOPKI 	125
#define TBL_X_TUNINGPARAMETER_LOWBOUND_POSNLOOPKP 	120
#define TBL_X_TUNINGPARAMETER_LOWBOUND_ACCFFC 	6593
#define TBL_X_TUNINGPARAMETER_LOWBOUND_VELLOOPLIMITI 	100

#define TBL_X_TUNINGPARAMETER_UPPBOUND_VELLOOP_KP 	366
#define TBL_X_TUNINGPARAMETER_UPPBOUND_VELLOOPKI 	375
#define TBL_X_TUNINGPARAMETER_UPPBOUND_POSNLOOPKP 	180
#define TBL_X_TUNINGPARAMETER_UPPBOUND_ACCFFC 	7307
#define TBL_X_TUNINGPARAMETER_UPPBOUND_VELLOOPLIMITI 	50


#define TBL_Y_TUNINGPARAMETER_LOWBOUND_VELLOOP_KP 	320
#define TBL_Y_TUNINGPARAMETER_LOWBOUND_VELLOOPKI 	63
#define TBL_Y_TUNINGPARAMETER_LOWBOUND_POSNLOOPKP 	25
#define TBL_Y_TUNINGPARAMETER_LOWBOUND_ACCFFC 	10777
#define TBL_Y_TUNINGPARAMETER_LOWBOUND_VELLOOPLIMITI 	50

#define TBL_Y_TUNINGPARAMETER_UPPBOUND_VELLOOP_KP 	480
#define TBL_Y_TUNINGPARAMETER_UPPBOUND_VELLOOPKI 	247
#define TBL_Y_TUNINGPARAMETER_UPPBOUND_POSNLOOPKP 	267
#define TBL_Y_TUNINGPARAMETER_UPPBOUND_ACCFFC 	12353
#define TBL_Y_TUNINGPARAMETER_UPPBOUND_VELLOOPLIMITI 	50

// JerkFF
#define TBL_X_TUNINGPARAMETER_LOWBOUND_JERKFF_    0
#define TBL_X_TUNINGPARAMETER_UPPBOUND_JERKFF_    3600

#define TBL_Y_TUNINGPARAMETER_LOWBOUND_JERKFF_    0
#define TBL_Y_TUNINGPARAMETER_UPPBOUND_JERKFF_    3600

#define BH_TUNINGPARAMETER_LOWBOUND_JERKFF_       0
#define BH_TUNINGPARAMETER_UPPBOUND_JERKFF_       3600

typedef struct
{
	int iSrchHeightPosn;
	int iSrchVelocity;
	int i2ndSrchHeightPosn;  	//  20120512
	int iRevHeight;
	int iKinkHeight;
	int iLoopTop;
	int i2ndSrchVelocity;
	int iTailDistance;
	int iResetPosn;
}WB_TUNE_B1W_STOP_SRCH_CFG;


// 6. Classification of parameters {Servo, Motion}
// 6.1 BondHead BLKs of servo parameter, classified according to positions in a bonding loop, 
#define MAX_NUM_SET_POSITION_TUNE_WB_BH		10
#define IDX_BH_MOTION_1ST_BOND_SEARCH_HEIGHT	0
#define IDX_BH_MOTION_REVERSE_HEIGHT			1
#define IDX_BH_MOTION_KINK_HEIGHT				2
#define IDX_BH_MOTION_LOOP_TOP					3
#define IDX_BH_MOTION_TRAJ_2ND_BOND_SEARCH_H	4
#define IDX_BH_MOTION_TAIL						5
#define IDX_BH_MOTION_RESET_FIRE_LEVEL			6

typedef enum
{
	WB_BH_IDLE = 0,
	WB_BH_1ST_CONTACT = 1,
	WB_BH_SRCH_HT = 2,
	WB_BH_LOOPING = 3,
	WB_BH_LOOP_TOP = 4,
	WB_BH_TRAJECTORY = 5,
	WB_BH_TAIL = 6,
	WB_BH_RESET = 7,
	WB_BH_2ND_CONTACT = 8,
	WB_BH_RD = 9,
	WB_BH_RH2 = 10,
	WB_BH_RD2 = 11,
	WB_BH_RH3 = 12,
	WB_BH_RD3 = 13,
	WB_BH_RH4 = 14,
	WB_BH_RTWS = 15,
	WB_BH_FTWS = 16,
};
typedef struct
{
	double dObj[WB_BH_FTWS + 1];
}WB_TUNE_B1W_BH_OBJ;

typedef struct
{
	int aiTuneB1W_PassFlag[WB_BH_FTWS + 1];
}WB_TUNE_B1W_BH_PASS_FLAG;

#define EXPECT_POSN_ERR_FB_LEAD_CMD_SRCH_CONTACT     8
#define DEF_WB_BOND_PROGRAM_IN_BUFF_IDX                0
#define DEF_SRCH_VELOCITY                              (-20000)
#define DEF_TAIL_DIST									(500)

// 6.2 Table BLKs of motion parameter, classified according to positions in a bonding loop, 
#define MAX_NUM_SET_POSITION_TUNE_WB_TABLE		6
typedef enum
{
	WB_TBL_MOTION_IDX_MOVE_BTO = 0,
	WB_TBL_MOTION_IDX_MOVE_REVERSE_DIST, // 1,
	WB_TBL_MOTION_IDX_MOVE_TRAJ, // = 2,
	WB_TBL_MOTION_IDX_MOVE_NEXT_PR, // = 3,
	WB_TBL_MOTION_IDX_MOVE_KINK_1, // = 4,
	WB_TBL_MOTION_IDX_MOVE_KINK_2, // = 5,
};

// 6.3 Table BLKs of servo parameters, 20121018, change  DEF_NUM_SECTOR_POSN_RANGE_TBL_X to 4
#define UNIT_DIST_MM_CLASSIFY_TABLE_SERVO    20
#define DEF_NUM_SECTOR_POSN_RANGE_TBL_X  5
#define DEF_NUM_SECTOR_POSN_RANGE_TBL_Y  5
#define MAX_NUM_SECTOR_TBL_XY            4

typedef enum
{
	WB_TBL_POSITION_RANGE_0U_1U = 0,
	WB_TBL_POSITION_RANGE_0U_N1U = 1,
	WB_TBL_POSITION_RANGE_1U_2U = 2,
	WB_TBL_POSITION_RANGE_N1U_N2U = 3,
	WB_TBL_POSITION_RANGE_2U_3U = 4,
	WB_TBL_POSITION_RANGE_N2U_N3U = 5,
	WB_TBL_POSITION_RANGE_3U_4U = 6,
	WB_TBL_POSITION_RANGE_N3U_N4U = 7,
	WB_TBL_POSITION_RANGE_4U_5U = 8,
	WB_TBL_POSITION_RANGE_N4U_N5U = 9,
	WB_TBL_POSITION_RANGE_5U_6U = 10,
	WB_TBL_POSITION_RANGE_N5U_N6U = 11,
	WB_TBL_POSITION_RANGE_6U_7U = 12,
	WB_TBL_POSITION_RANGE_N6U_N7U = 13,
	WB_TBL_POSITION_RANGE_7U_8U = 14,
	WB_TBL_POSITION_RANGE_N7U_N8U = 15,
	WB_TBL_POSITION_RANGE_8U_9U = 16,
	WB_TBL_POSITION_RANGE_N8U_N9U = 17,
	WB_TBL_POSITION_RANGE_9U_10U = 18,
	WB_TBL_POSITION_RANGE_N9U_N10U = 19,
};

#define MAX_NUM_SECTOR_POSN_RANGE_TBL  12

#endif // __MTN_WB_DEF__